<div class="container" *ngIf="product">
  <!-- Product Section -->
  <div class="product-section">
    <img [src]="product.image" [alt]="product.name" class="product-image">
    <div class="product-info">
      <p class="manufacturer">{{ product.manufacturer }}</p>
      <h1>{{ product.name }}</h1>
      <p class="category">{{ product.category }}</p>
      <p class="price">{{ product.price }}</p>
      <p class="description">{{ product.description }}</p>
      
      <div class="specifications" *ngIf="product.specifications">
        <h3>Specifications</h3>
        <ul>
          <li *ngFor="let spec of product.specifications">{{ spec }}</li>
        </ul>
      </div>
      
      <div class="rating-summary">
        <div class="stars">
          <span *ngFor="let star of [1,2,3,4,5]" 
                [class.filled]="star <= categoryRatings.overall"
                [class.half]="star === Math.ceil(categoryRatings.overall) && categoryRatings.overall % 1 !== 0">
            {{ star <= Math.floor(categoryRatings.overall) ? '★' : (star === Math.ceil(categoryRatings.overall) && categoryRatings.overall % 1 !== 0 ? '⯨' : '☆') }}
          </span>
        </div>
        <span class="rating-text">{{ categoryRatings.overall }} out of 5 ({{ categoryRatings.count }} reviews)</span>
      </div>
    </div>
  </div>

  <!-- Category Ratings Section -->
  <div class="category-ratings-section">
    <h2>Average Ratings by Category</h2>
    
    <div class="category-rating-card">
      <div class="category-header">
        <h3>Transportability & Mobility</h3>
        <span class="rating-score">{{ categoryRatings.transportability }}/5</span>
      </div>
      <p class="category-description">Ease of deployment, movement, and setup in various operational environments</p>
      <div class="stars">
        <span *ngFor="let star of [1,2,3,4,5]" 
              [class.filled]="star <= categoryRatings.transportability"
              [class.half]="star === Math.ceil(categoryRatings.transportability) && categoryRatings.transportability % 1 !== 0">
          {{ star <= Math.floor(categoryRatings.transportability) ? '★' : (star === Math.ceil(categoryRatings.transportability) && categoryRatings.transportability % 1 !== 0 ? '⯨' : '☆') }}
        </span>
      </div>
    </div>

    <div class="category-rating-card">
      <div class="category-header">
        <h3>Ease of Use</h3>
        <span class="rating-score">{{ categoryRatings.easeOfUse }}/5</span>
      </div>
      <p class="category-description">User interface intuitiveness, training requirements, and operator friendliness</p>
      <div class="stars">
        <span *ngFor="let star of [1,2,3,4,5]" 
              [class.filled]="star <= categoryRatings.easeOfUse"
              [class.half]="star === Math.ceil(categoryRatings.easeOfUse) && categoryRatings.easeOfUse % 1 !== 0">
          {{ star <= Math.floor(categoryRatings.easeOfUse) ? '★' : (star === Math.ceil(categoryRatings.easeOfUse) && categoryRatings.easeOfUse % 1 !== 0 ? '⯨' : '☆') }}
        </span>
      </div>
    </div>

    <div class="category-rating-card">
      <div class="category-header">
        <h3>Interoperability</h3>
        <span class="rating-score">{{ categoryRatings.interoperability }}/5</span>
      </div>
      <p class="category-description">Integration capacity with existing command and control systems</p>
      <div class="stars">
        <span *ngFor="let star of [1,2,3,4,5]" 
              [class.filled]="star <= categoryRatings.interoperability"
              [class.half]="star === Math.ceil(categoryRatings.interoperability) && categoryRatings.interoperability % 1 !== 0">
          {{ star <= Math.floor(categoryRatings.interoperability) ? '★' : (star === Math.ceil(categoryRatings.interoperability) && categoryRatings.interoperability % 1 !== 0 ? '⯨' : '☆') }}
        </span>
      </div>
    </div>

    <div class="category-rating-card">
      <div class="category-header">
        <h3>Detection & Effectiveness</h3>
        <span class="rating-score">{{ categoryRatings.detection }}/5</span>
      </div>
      <p class="category-description">System's capability in detecting and responding to threats</p>
      <div class="stars">
        <span *ngFor="let star of [1,2,3,4,5]" 
              [class.filled]="star <= categoryRatings.detection"
              [class.half]="star === Math.ceil(categoryRatings.detection) && categoryRatings.detection % 1 !== 0">
          {{ star <= Math.floor(categoryRatings.detection) ? '★' : (star === Math.ceil(categoryRatings.detection) && categoryRatings.detection % 1 !== 0 ? '⯨' : '☆') }}
        </span>
      </div>
    </div>

    <div class="category-rating-card">
      <div class="category-header">
        <h3>System Reliability</h3>
        <span class="rating-score">{{ categoryRatings.reliability }}/5</span>
      </div>
      <p class="category-description">Consistency of performance and uptime in operational conditions</p>
      <div class="stars">
        <span *ngFor="let star of [1,2,3,4,5]" 
              [class.filled]="star <= categoryRatings.reliability"
              [class.half]="star === Math.ceil(categoryRatings.reliability) && categoryRatings.reliability % 1 !== 0">
          {{ star <= Math.floor(categoryRatings.reliability) ? '★' : (star === Math.ceil(categoryRatings.reliability) && categoryRatings.reliability % 1 !== 0 ? '⯨' : '☆') }}
        </span>
      </div>
    </div>
  </div>
</div>